scalar DateScalar

type Session {
  _id: ID!
  memberId: ID!
  member: Member
  start: DateScalar!

  """
  Se end é undefined, significa que o usuário ainda está logado
  """
  end: DateScalar

  """
  Duração da sesssão em milisegundos,
  A duração pode ser relativa à data de fim, ou, caso não esta exista, a hora atual.
  """
  duration: Int!
  """
  Duração da sesssão no formato hh:mm
  A duração pode ser relativa à data de fim, ou, caso não esta exista, a hora atual.
  """
  formatedDuration: String!
}

type CompiledSessions {
  sessions: [Session]!

  """
  A soma total da duração das sessões retornadas em milisegundos
  """
  total: Int!

  """
  A soma total da duração das sessões retornadas no formato hh:mm
  """
  formatedTotal: String!
}

type Query {
  sessions(
    memberId: ID!
    startDate: DateScalar
    endDate: DateScalar
  ): CompiledSessions!
  loggedMembers: [Session]!
}

input SessionCreateInput {
  memberId: ID!
  start: String!
  end: String
}

input SessionUpdateInput {
  start: String
  end: String
}

type Mutation {
  startSession(memberId: ID!): Session!
  endSession(memberId: ID!): Session!
  updateSession(_id: ID!, data: SessionUpdateInput!): Session!
  deleteSession(_id: ID!): Boolean
}

enum Actions {
  STARTED
  FINISHED
}

type sessionUpdate {
  session: Session
  action: Actions!
}

type Subscription {
  sessionUpdate: sessionUpdate!
}
